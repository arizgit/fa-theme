{%- comment -%}
  IMPLEMENTATION NOTE: Impact header with all the menu is an extremely complex piece of code. Due to requirements from design
  team, we had to cover over hundred of potential combinations. As a consequence, this part (and all the menu snippets) are
  extremely sensitive code that should (if possible) not be touched unless you have spend enough time to study and understand
  the underlying logic of the menu.
{%- endcomment -%}

{%- if section.settings.show_country_selector and localization.available_countries.size > 1 -%}
  {%- assign will_show_country_selector = true -%}
{%- endif -%}

{%- if section.settings.show_locale_selector and localization.available_languages.size > 1 -%}
  {%- assign will_show_locale_selector = true -%}
{%- endif -%}

<style>
  :root {
    --sticky-header-enabled: {%- if section.settings.enable_sticky -%}1{% else %}0{% endif %};
  }

  #shopify-section-{{ section.id }} {
    --header-grid-template: "main-nav logo secondary-nav" / minmax(0, 1fr) auto minmax(0, 1fr);
    --header-padding-block: {% if section.settings.reduce_padding %}var(--spacing-3){% else %}var(--spacing-4-5){% endif %};
    --header-background-opacity: {{ section.settings.background_opacity | divided_by: 100.0 }};
    --header-background-blur-radius: {{ section.settings.background_blur_radius }}px;
    --header-transparent-text-color: {{ section.settings.transparent_header_text_color.rgb }};

    {%- if section.settings.logo != blank -%}
      --header-logo-width: {{ section.settings.logo_mobile_max_width }}px;
      --header-logo-height: {{ section.settings.logo_mobile_max_width | divided_by: section.settings.logo.aspect_ratio | round }}px;
    {%- endif -%}

    position: {% if section.settings.enable_sticky %}sticky{% else %}relative{% endif %};
    top: 0;
    z-index: 10;
  }

  {%- if section.settings.enable_sticky -%}
    .shopify-section--announcement-bar ~ #shopify-section-{{ section.id }} {
      top: calc(var(--sticky-announcement-bar-enabled, 0) * var(--announcement-bar-height, 0px));
    }
  {%- endif -%}

  {%- if section.settings.opening_from == 'left' -%}
    @media screen and (max-width: 699px) {
      .navigation-drawer {
        --drawer-content-max-height: calc(100vh - (var(--spacing-2) * 2));
      }
    }
  {%- endif -%}

  @media screen and (min-width: 700px) {
    #shopify-section-{{ section.id }} {
      {%- if section.settings.logo != blank -%}
        --header-logo-width: {{ section.settings.logo_max_width }}px;
        --header-logo-height: {{ section.settings.logo_max_width | divided_by: section.settings.logo.aspect_ratio | round }}px;
      {%- endif -%}

      --header-padding-block: {% if section.settings.reduce_padding %}var(--spacing-6){% else %}var(--spacing-8-5){% endif %};
    }
  }

  {%- if section.settings.layout contains 'logo_left' -%}
    @media screen and (min-width: 1150px) {
      {%- liquid
        if section.settings.secondary_menu != blank or will_show_country_selector or will_show_locale_selector
          assign max_percent = '55%'
        else
          assign max_percent = '70%'
        endif

        case section.settings.layout
          when 'logo_left_navigation_inline'
            assign header_grid_template = "auto minmax(0, 1fr) minmax(0, max-content)"
          when 'logo_left_navigation_right'
            assign header_grid_template = "minmax(0, 1fr) fit-content(" | append: max_percent | append: ") minmax(0, min-content)"
          else
            assign header_grid_template = "minmax(0, 1fr) fit-content(" | append: max_percent | append: ") minmax(0, 1fr)"
        endcase
      -%}

      #shopify-section-{{ section.id }} {
        --header-grid-template: "logo main-nav secondary-nav" / {{ header_grid_template }};
      }
    }
  {%- endif -%}
</style>

<height-observer variable="header">
  <store-header
    class="header"
    {% if section.settings.hide_on_scroll %}
      hide-on-scroll="100"
    {% endif %}
    {% if section.settings.enable_sticky %}
      sticky
    {% endif %}
  >
    <div class="header__wrapper">
      {%- comment -%}
        --------------------------------------------------------------------------------------------------------------------
        MAIN NAV AREA
        --------------------------------------------------------------------------------------------------------------------
      {%- endcomment -%}

      <div class="header__main-nav">
        <div class="header__icon-list">
          <button
            type="button"
            class="tap-area {% if section.settings.layout != 'drawer' %}lg:hidden{% endif %}"
            aria-controls="header-sidebar-menu"
          >
            <span class="sr-only">{{ 'header.general.open_menu' | t }}</span>
            {%- render 'icon' with 'hamburger' -%}
          </button>

          {% unless section.settings.hide_search %}
            <a href="{{ routes.search_url }}" class="tap-area sm:hidden" aria-controls="search-drawer">
              <span class="sr-only">{{ 'header.general.open_search' | t }}</span>
              {%- render 'icon' with 'search' -%}
            </a>
          {%- endunless -%}

          {%- if section.settings.layout != 'drawer' and section.settings.menu.links.size > 0 -%}
            <nav
              class="header__link-list {% if section.settings.layout == 'logo_left_navigation_center' or section.settings.layout == 'logo_left_navigation_right'%}justify-center{% endif %} wrap"
              role="navigation"
            >
              <ul class="contents" role="list">
                {%- for link in section.settings.menu.links -%}
                  {% liquid
                    assign link_title_downcase = link.title | strip | downcase
                    assign mega_menu_block = ''

                    for block in section.blocks
                      assign menu_item_downcase = block.settings.menu_item | strip | downcase

                      if menu_item_downcase == link_title_downcase
                        assign mega_menu_block = block
                        break
                      endif
                    endfor
                  %}

                  <li>
                    {%- if link.levels == 0 and mega_menu_block == '' -%}
                      <a
                        href="{{ link.url }}"
                        class="text-nav-link link-faded-reverse"
                        {% if link.current %}
                          aria-current="page"
                        {% endif %}
                      >
                        {{- link.title -}}
                      </a>
                    {%- else -%}
                      {%- if mega_menu_block != '' -%}
                        {%- comment -%}
                          Implementation note: the designers had the desire to show a lot of different kind of menus in Impact: one standard
                          mega menu but also a kind of "sidebar" mode when the mega-menu appears in a drawer. Unfortunately, this comes with
                          a lot of extra complexity as we have to go through two different code path: a "details" element for the standard
                          menu, and a full drawer for the other one.
                        {%- endcomment -%}
                        {%- unless mega_menu_block.settings.layout == 'drawer' -%}
                          <details
                            is="mega-menu-disclosure"
                            trigger="{{ section.settings.menu_open_trigger | escape }}"
                            {{ mega_menu_block.shopify_attributes }}
                          >
                            <summary
                              class="text-with-icon gap-2.5 bold link-faded-reverse"
                              {% if link.url != '#' %}
                                data-url="{{ link.url | escape }}"
                              {% endif %}
                            >
                              {{- link.title -}}
                              {%- render 'icon' with 'chevron-bottom' -%}
                            </summary>

                            {%- render 'mega-menu-horizontal', link: link, mega_menu_block: mega_menu_block -%}
                          </details>
                        {%- else -%}
                          <button
                            aria-controls="navigation-drawer-{{ forloop.index }}"
                            aria-expanded="false"
                            class="text-with-icon gap-2.5 bold link-faded-reverse"
                          >
                            {{- link.title -}}
                            {%- render 'icon' with 'chevron-bottom' -%}
                          </button>

                          <navigation-drawer
                            class="navigation-drawer drawer lg-max:hidden"
                            id="navigation-drawer-{{ forloop.index }}"
                            open-from="left"
                            mega-menu
                          >
                            {%- render 'navigation-panel',
                              navigation_layout: section.settings.layout,
                              main_menu: link,
                              is_mega_menu: true,
                              mega_menu_block: mega_menu_block
                            -%}
                          </navigation-drawer>
                        {%- endunless -%}
                      {%- else -%}
                        <details
                          class="relative"
                          is="dropdown-disclosure"
                          trigger="{{ section.settings.menu_open_trigger | escape }}"
                        >
                          <summary
                            class="text-with-icon gap-2.5 bold link-faded-reverse"
                            {% if link.url != '#' %}
                              data-url="{{ link.url | escape }}"
                            {% endif %}
                          >
                            {{- link.title -}}
                            {%- render 'icon' with 'chevron-bottom' -%}
                          </summary>

                          <div class="dropdown-menu {% if link.levels <= 1 %}dropdown-menu--restrictable{% endif %}">
                            <ul class="contents" role="list">
                              {%- for sub_link in link.links -%}
                                <li>
                                  {%- if sub_link.levels == 0 -%}
                                    <a
                                      href="{{ sub_link.url }}"
                                      class="dropdown-menu__item group"
                                      {% if sub_link.current %}
                                        aria-current="page"
                                      {% endif %}
                                    >
                                      <span
                                        ><span class="reversed-link">{{ sub_link.title }}</span></span
                                      >
                                    </a>
                                  {%- else -%}
                                    <details
                                      class="relative"
                                      is="dropdown-disclosure"
                                      trigger="{{ section.settings.menu_open_trigger | escape }}"
                                    >
                                      <summary
                                        class="dropdown-menu__item group"
                                        {% if sub_link.url != '#' %}
                                          data-url="{{ sub_link.url | escape }}"
                                        {% endif %}
                                      >
                                        <span
                                          ><span class="reversed-link">{{- sub_link.title -}}</span></span
                                        >
                                        {%- render 'icon' with 'chevron-right' -%}
                                      </summary>

                                      <div class="dropdown-menu">
                                        <ul class="contents" role="list">
                                          {%- for sub_sub_link in sub_link.links -%}
                                            <li>
                                              <a
                                                href="{{ sub_sub_link.url }}"
                                                class="dropdown-menu__item group"
                                                {% if sub_sub_link.current %}
                                                  aria-current="page"
                                                {% endif %}
                                              >
                                                <span
                                                  ><span class="reversed-link">{{ sub_sub_link.title }}</span></span
                                                >
                                              </a>
                                            </li>
                                          {%- endfor -%}
                                        </ul>
                                      </div>
                                    </details>
                                  {%- endif -%}
                                </li>
                              {%- endfor -%}
                            </ul>
                          </div>
                        </details>
                      {%- endif -%}
                    {%- endif -%}
                  </li>
                {%- endfor -%}
              </ul>
            </nav>
          {%- endif -%}
        </div>
      </div>

      {%- comment -%}
        --------------------------------------------------------------------------------------------------------------------
        LOGO AREA
        --------------------------------------------------------------------------------------------------------------------
      {%- endcomment -%}

      {%- capture logo_content -%}
        {%- if section.settings.logo -%}
          {%- capture sizes -%}{{ section.settings.logo_max_width }}px{%- endcapture -%}
          {%- capture widths -%}{{ section.settings.logo_max_width | times: 2 | at_most: section.settings.logo.width }}, {{ section.settings.logo_max_width | times: 3 | at_most: section.settings.logo.width }}{%- endcapture -%}
          <span class="sr-only">{{ shop.name }}</span>
          {{- section.settings.logo | image_url: width: section.settings.logo.width | image_tag: sizes: sizes, widths: widths, class: 'header__logo-image' -}}

          {%- if section.settings.transparent_logo -%}
            {{- section.settings.transparent_logo | image_url: width: section.settings.transparent_logo.width | image_tag: sizes: sizes, widths: widths, class: 'header__logo-image header__logo-image--transparent' -}}
          {%- endif -%}
        {%- else -%}
          <span class="header__logo-text h4">{{ shop.name }}</span>
        {%- endif -%}
      {%- endcapture -%}

      {%- if request.page_type == 'index' -%}
        <h1 class="header__logo">
          <a href="{{ routes.root_url }}">{{ logo_content }}</a>
        </h1>
      {% else %}
        <a href="{{ routes.root_url }}" class="header__logo">{{ logo_content }}</a>
      {% endif %}

      {%- comment -%}
        --------------------------------------------------------------------------------------------------------------------
        SECONDARY NAV AREA
        --------------------------------------------------------------------------------------------------------------------
      {%- endcomment -%}

      <div class="header__secondary-nav header__secondary-nav-test">
        <div class="country-dropdown" id="countryDropdown">
          <div class="selected-option" id="selectedOption">
            <div class="selectedOption-value">
              {% if request.host contains '.co' %}
                <svg xmlns="http://www.w3.org/2000/svg" id="flag-icons-us" viewBox="0 0 640 480">
                  <path fill="#bd3d44" d="M0 0h640v480H0" />
                  <path stroke="#fff" stroke-width="37"
                      d="M0 55.3h640M0 129h640M0 203h640M0 277h640M0 351h640M0 425h640" />
                  <path fill="#192f5d" d="M0 0h364.8v258.5H0" />
                  <marker id="us-a" markerHeight="30" markerWidth="30">
                      <path fill="#fff" d="m14 0 9 27L0 10h28L5 27z" />
                  </marker>
                  <path fill="none" marker-mid="url(#us-a)"
                      d="m0 0 16 11h61 61 61 61 60L47 37h61 61 60 61L16 63h61 61 61 61 60L47 89h61 61 60 61L16 115h61 61 61 61 60L47 141h61 61 60 61L16 166h61 61 61 61 60L47 192h61 61 60 61L16 218h61 61 61 61 60z" />
                </svg>
              {% elsif request.host contains '.ca' %}
                <svg xmlns="http://www.w3.org/2000/svg" id="flag-icons-ca" viewBox="0 0 640 480">
                  <path fill="#fff" d="M150.1 0h339.7v480H150z" />
                  <path fill="#d52b1e"
                      d="M-19.7 0h169.8v480H-19.7zm509.5 0h169.8v480H489.9zM201 232l-13.3 4.4 61.4 54c4.7 13.7-1.6 17.8-5.6 25l66.6-8.4-1.6 67 13.9-.3-3.1-66.6 66.7 8c-4.1-8.7-7.8-13.3-4-27.2l61.3-51-10.7-4c-8.8-6.8 3.8-32.6 5.6-48.9 0 0-35.7 12.3-38 5.8l-9.2-17.5-32.6 35.8c-3.5.9-5-.5-5.9-3.5l15-74.8-23.8 13.4c-2 .9-4 .1-5.2-2.2l-23-46-23.6 47.8c-1.8 1.7-3.6 1.9-5 .7L264 130.8l13.7 74.1c-1.1 3-3.7 3.8-6.7 2.2l-31.2-35.3c-4 6.5-6.8 17.1-12.2 19.5-5.4 2.3-23.5-4.5-35.6-7 4.2 14.8 17 39.6 9 47.7" />
                </svg>
              {% elsif request.host contains '.co.uk' %}
                <svg xmlns="http://www.w3.org/2000/svg" id="flag-icons-gb" viewBox="0 0 640 480">
                  <path fill="#012169" d="M0 0h640v480H0z" />
                  <path fill="#FFF"
                      d="m75 0 244 181L562 0h78v62L400 241l240 178v61h-80L320 301 81 480H0v-60l239-178L0 64V0z" />
                  <path fill="#C8102E"
                      d="m424 281 216 159v40L369 281zm-184 20 6 35L54 480H0zM640 0v3L391 191l2-44L590 0zM0 0l239 176h-60L0 42z" />
                  <path fill="#FFF" d="M241 0v480h160V0zM0 160v160h640V160z" />
                  <path fill="#C8102E" d="M0 193v96h640v-96zM273 0v480h96V0z" />
                </svg>
              {% elsif request.host contains '.au' %}
                <svg xmlns="http://www.w3.org/2000/svg" id="flag-icons-au" viewBox="0 0 640 480">
                  <path fill="#00008B" d="M0 0h640v480H0z" />
                  <path fill="#fff"
                      d="m37.5 0 122 90.5L281 0h39v31l-120 89.5 120 89V240h-40l-120-89.5L40.5 240H0v-30l119.5-89L0 32V0z" />
                  <path fill="red"
                      d="M212 140.5 320 220v20l-135.5-99.5zm-92 10 3 17.5-96 72H0zM320 0v1.5l-124.5 94 1-22L295 0zM0 0l119.5 88h-30L0 21z" />
                  <path fill="#fff" d="M120.5 0v240h80V0zM0 80v80h320V80z" />
                  <path fill="red" d="M0 96.5v48h320v-48zM136.5 0v240h48V0z" />
                  <path fill="#fff"
                      d="m527 396.7-20.5 2.6 2.2 20.5-14.8-14.4-14.7 14.5 2-20.5-20.5-2.4 17.3-11.2-10.9-17.5 19.6 6.5 6.9-19.5 7.1 19.4 19.5-6.7-10.7 17.6zm-3.7-117.2 2.7-13-9.8-9 13.2-1.5 5.5-12.1 5.5 12.1 13.2 1.5-9.8 9 2.7 13-11.6-6.6zm-104.1-60-20.3 2.2 1.8 20.3-14.4-14.5-14.8 14.1 2.4-20.3-20.2-2.7 17.3-10.8-10.5-17.5 19.3 6.8L387 178l6.7 19.3 19.4-6.3-10.9 17.3 17.1 11.2ZM623 186.7l-20.9 2.7 2.3 20.9-15.1-14.7-15 14.8 2.1-21-20.9-2.4 17.7-11.5-11.1-17.9 20 6.7 7-19.8 7.2 19.8 19.9-6.9-11 18zm-96.1-83.5-20.7 2.3 1.9 20.8-14.7-14.8-15.1 14.4 2.4-20.7-20.7-2.8 17.7-11L467 73.5l19.7 6.9 7.3-19.5 6.8 19.7 19.8-6.5-11.1 17.6zM234 385.7l-45.8 5.4 4.6 45.9-32.8-32.4-33 32.2 4.9-45.9-45.8-5.8 38.9-24.8-24-39.4 43.6 15 15.8-43.4 15.5 43.5 43.7-14.7-24.3 39.2 38.8 25.1Z" />
                </svg>
              {% elsif request.host contains '.eu' %}
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  xmlns:xlink="http://www.w3.org/1999/xlink"
                  id="flag-icons-eu"
                  viewBox="0 0 640 480"
                >
                  <defs>
                      <g id="eu-d">
                          <g id="eu-b">
                              <path id="eu-a" d="m0-1-.3 1 .5.1z" />
                              <use xlink:href="#eu-a" transform="scale(-1 1)" />
                          </g>
                          <g id="eu-c">
                              <use xlink:href="#eu-b" transform="rotate(72)" />
                              <use xlink:href="#eu-b" transform="rotate(144)" />
                          </g>
                          <use xlink:href="#eu-c" transform="scale(-1 1)" />
                      </g>
                  </defs>
                  <path fill="#039" d="M0 0h640v480H0z" />
                  <g fill="#fc0" transform="translate(320 242.3)scale(23.7037)">
                      <use xlink:href="#eu-d" width="100%" height="100%" y="-6" />
                      <use xlink:href="#eu-d" width="100%" height="100%" y="6" />
                      <g id="eu-e">
                          <use xlink:href="#eu-d" width="100%" height="100%" x="-6" />
                          <use xlink:href="#eu-d" width="100%" height="100%" transform="rotate(-144 -2.3 -2.1)" />
                          <use xlink:href="#eu-d" width="100%" height="100%" transform="rotate(144 -2.1 -2.3)" />
                          <use xlink:href="#eu-d" width="100%" height="100%" transform="rotate(72 -4.7 -2)" />
                          <use xlink:href="#eu-d" width="100%" height="100%" transform="rotate(72 -5 .5)" />
                      </g>
                      <use xlink:href="#eu-e" width="100%" height="100%" transform="scale(-1 1)" />
                  </g>
                </svg>
              {% endif %}
            </div>
            <svg
              class="dropdownList-arrow"
              data-dropdown-button=""
              xmlns="http://www.w3.org/2000/svg"
              height="48px"
              viewBox="0 0 24 24"
              width="48px"
              fill="#000000"
            >
              <path d="M24 24H0V0h24v24z" fill="none" opacity=".87"></path><path d="M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6-1.41-1.41z"></path>
            </svg>
          </div>
          <ul class="dropdown-list" id="dropdownList">
            <li data-value="https://freakathlete.co/?no_rule=true">
              <svg xmlns="http://www.w3.org/2000/svg" id="flag-icons-us" viewBox="0 0 640 480">
                <path fill="#bd3d44" d="M0 0h640v480H0" />
                <path stroke="#fff" stroke-width="37"
                    d="M0 55.3h640M0 129h640M0 203h640M0 277h640M0 351h640M0 425h640" />
                <path fill="#192f5d" d="M0 0h364.8v258.5H0" />
                <marker id="us-a" markerHeight="30" markerWidth="30">
                    <path fill="#fff" d="m14 0 9 27L0 10h28L5 27z" />
                </marker>
                <path fill="none" marker-mid="url(#us-a)"
                    d="m0 0 16 11h61 61 61 61 60L47 37h61 61 60 61L16 63h61 61 61 61 60L47 89h61 61 60 61L16 115h61 61 61 61 60L47 141h61 61 60 61L16 166h61 61 61 61 60L47 192h61 61 60 61L16 218h61 61 61 61 60z" />
              </svg>
            </li>
            <li data-value="https://freakathlete.ca/?no_rule=true">
              <svg xmlns="http://www.w3.org/2000/svg" id="flag-icons-ca" viewBox="0 0 640 480">
                <path fill="#fff" d="M150.1 0h339.7v480H150z" />
                <path fill="#d52b1e"
                    d="M-19.7 0h169.8v480H-19.7zm509.5 0h169.8v480H489.9zM201 232l-13.3 4.4 61.4 54c4.7 13.7-1.6 17.8-5.6 25l66.6-8.4-1.6 67 13.9-.3-3.1-66.6 66.7 8c-4.1-8.7-7.8-13.3-4-27.2l61.3-51-10.7-4c-8.8-6.8 3.8-32.6 5.6-48.9 0 0-35.7 12.3-38 5.8l-9.2-17.5-32.6 35.8c-3.5.9-5-.5-5.9-3.5l15-74.8-23.8 13.4c-2 .9-4 .1-5.2-2.2l-23-46-23.6 47.8c-1.8 1.7-3.6 1.9-5 .7L264 130.8l13.7 74.1c-1.1 3-3.7 3.8-6.7 2.2l-31.2-35.3c-4 6.5-6.8 17.1-12.2 19.5-5.4 2.3-23.5-4.5-35.6-7 4.2 14.8 17 39.6 9 47.7" />
              </svg>
            </li>
            <li data-value="https://freakathlete.co.uk/?no_rule=true">
              <svg xmlns="http://www.w3.org/2000/svg" id="flag-icons-gb" viewBox="0 0 640 480">
                <path fill="#012169" d="M0 0h640v480H0z" />
                <path fill="#FFF"
                    d="m75 0 244 181L562 0h78v62L400 241l240 178v61h-80L320 301 81 480H0v-60l239-178L0 64V0z" />
                <path fill="#C8102E"
                    d="m424 281 216 159v40L369 281zm-184 20 6 35L54 480H0zM640 0v3L391 191l2-44L590 0zM0 0l239 176h-60L0 42z" />
                <path fill="#FFF" d="M241 0v480h160V0zM0 160v160h640V160z" />
                <path fill="#C8102E" d="M0 193v96h640v-96zM273 0v480h96V0z" />
              </svg>
            </li>
            <li data-value="https://freakathlete.au/?no_rule=true">
              <svg xmlns="http://www.w3.org/2000/svg" id="flag-icons-au" viewBox="0 0 640 480">
                <path fill="#00008B" d="M0 0h640v480H0z" />
                <path fill="#fff"
                    d="m37.5 0 122 90.5L281 0h39v31l-120 89.5 120 89V240h-40l-120-89.5L40.5 240H0v-30l119.5-89L0 32V0z" />
                <path fill="red"
                    d="M212 140.5 320 220v20l-135.5-99.5zm-92 10 3 17.5-96 72H0zM320 0v1.5l-124.5 94 1-22L295 0zM0 0l119.5 88h-30L0 21z" />
                <path fill="#fff" d="M120.5 0v240h80V0zM0 80v80h320V80z" />
                <path fill="red" d="M0 96.5v48h320v-48zM136.5 0v240h48V0z" />
                <path fill="#fff"
                    d="m527 396.7-20.5 2.6 2.2 20.5-14.8-14.4-14.7 14.5 2-20.5-20.5-2.4 17.3-11.2-10.9-17.5 19.6 6.5 6.9-19.5 7.1 19.4 19.5-6.7-10.7 17.6zm-3.7-117.2 2.7-13-9.8-9 13.2-1.5 5.5-12.1 5.5 12.1 13.2 1.5-9.8 9 2.7 13-11.6-6.6zm-104.1-60-20.3 2.2 1.8 20.3-14.4-14.5-14.8 14.1 2.4-20.3-20.2-2.7 17.3-10.8-10.5-17.5 19.3 6.8L387 178l6.7 19.3 19.4-6.3-10.9 17.3 17.1 11.2ZM623 186.7l-20.9 2.7 2.3 20.9-15.1-14.7-15 14.8 2.1-21-20.9-2.4 17.7-11.5-11.1-17.9 20 6.7 7-19.8 7.2 19.8 19.9-6.9-11 18zm-96.1-83.5-20.7 2.3 1.9 20.8-14.7-14.8-15.1 14.4 2.4-20.7-20.7-2.8 17.7-11L467 73.5l19.7 6.9 7.3-19.5 6.8 19.7 19.8-6.5-11.1 17.6zM234 385.7l-45.8 5.4 4.6 45.9-32.8-32.4-33 32.2 4.9-45.9-45.8-5.8 38.9-24.8-24-39.4 43.6 15 15.8-43.4 15.5 43.5 43.7-14.7-24.3 39.2 38.8 25.1Z" />
              </svg>
            </li>
            <li data-value="https://freakathlete.eu/?no_rule=true">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                xmlns:xlink="http://www.w3.org/1999/xlink"
                id="flag-icons-eu"
                viewBox="0 0 640 480"
              >
                <defs>
                    <g id="eu-d">
                        <g id="eu-b">
                            <path id="eu-a" d="m0-1-.3 1 .5.1z" />
                            <use xlink:href="#eu-a" transform="scale(-1 1)" />
                        </g>
                        <g id="eu-c">
                            <use xlink:href="#eu-b" transform="rotate(72)" />
                            <use xlink:href="#eu-b" transform="rotate(144)" />
                        </g>
                        <use xlink:href="#eu-c" transform="scale(-1 1)" />
                    </g>
                </defs>
                <path fill="#039" d="M0 0h640v480H0z" />
                <g fill="#fc0" transform="translate(320 242.3)scale(23.7037)">
                    <use xlink:href="#eu-d" width="100%" height="100%" y="-6" />
                    <use xlink:href="#eu-d" width="100%" height="100%" y="6" />
                    <g id="eu-e">
                        <use xlink:href="#eu-d" width="100%" height="100%" x="-6" />
                        <use xlink:href="#eu-d" width="100%" height="100%" transform="rotate(-144 -2.3 -2.1)" />
                        <use xlink:href="#eu-d" width="100%" height="100%" transform="rotate(144 -2.1 -2.3)" />
                        <use xlink:href="#eu-d" width="100%" height="100%" transform="rotate(72 -4.7 -2)" />
                        <use xlink:href="#eu-d" width="100%" height="100%" transform="rotate(72 -5 .5)" />
                    </g>
                    <use xlink:href="#eu-e" width="100%" height="100%" transform="scale(-1 1)" />
                </g>
              </svg>
            </li>
          </ul>
        </div>

        {%- if section.settings.header != 'drawer' and section.settings.secondary_menu.links.size > 0 -%}
          <nav class="header__link-list" role="navigation">
            <ul class="contents">
              {%- for link in section.settings.secondary_menu.links -%}
                <li>
                  <a href="{{ link.url }}" class="bold link-faded-reverse">{{ link.title }}</a>
                </li>
              {%- endfor -%}
            </ul>
          </nav>
        {%- endif -%}

        <div class="header__icon-list">
          {%- if section.settings.show_country_selector and localization.available_countries.size > 1 -%}
            <div class="hidden md:block shrink-0">
              {%- render 'localization-selector',
                type: 'country',
                show_country_name: section.settings.show_country_name,
                show_country_flag: section.settings.show_country_flag,
                popover_vertical_position: 'end'
              -%}
            </div>
          {%- endif -%}

          {%- if section.settings.show_locale_selector and localization.available_languages.size > 1 -%}
            <div class="hidden md:block shrink-0">
              {%- render 'localization-selector', type: 'locale', popover_vertical_position: 'end' -%}
            </div>
          {%- endif -%}

          {% unless section.settings.hide_search %}
            <a href="{{ routes.search_url }}" class="hidden tap-area sm:block" aria-controls="search-drawer">
              <span class="sr-only">{{ 'header.general.open_search' | t }}</span>
              {%- render 'icon' with 'search' -%}
            </a>
          {% endunless %}

          {%- if shop.customer_accounts_enabled -%}
            <a
              href="{% if customer %}{{ routes.account_url }}{% else %}{{ routes.account_login_url }}{% endif %}"
              class="hidden tap-area sm:block"
            >
              <span class="sr-only">{{ 'header.general.open_account' | t }}</span>
              {%- render 'icon' with 'account' -%}
            </a>
          {%- endif -%}

          <a
            href="{{ routes.cart_url }}"
            data-no-instant
            class="relative tap-area"
            {% if settings.cart_type != 'page' and request.page_type != 'cart' %}
              aria-controls="cart-drawer"
            {% endif %}
          >
            <span class="sr-only">{{ 'header.general.open_cart' | t }}</span>
            {%- render 'icon' with 'fa-cart' -%}

            <div class="header__cart-count">
              <cart-count class="count-bubble {% if cart.item_count == 0 %}opacity-0{% endif %}" aria-hidden="true">
                {{- cart.item_count -}}
              </cart-count>
            </div>
          </a>
        </div>
      </div>
    </div>
  </store-header>
</height-observer>

{%- comment -%}
  --------------------------------------------------------------------------------------------------------------------
  NAVIGATION MENU DRAWER
  --------------------------------------------------------------------------------------------------------------------
{%- endcomment -%}

{%- assign main_menu = section.settings.sidebar_menu | default: section.settings.menu -%}
{%- assign secondary_menu = section.settings.secondary_menu -%}

{%- if main_menu.links.size > 0 or secondary_menu.links.size > 0 -%}
  <navigation-drawer
    mobile-opening="{{ section.settings.opening_from }}"
    open-from="left"
    id="header-sidebar-menu"
    class="navigation-drawer navigation-drawer-fa drawer {% if section.settings.layout != 'drawer' %}lg:hidden{% endif %}"
    {% if request.design_mode %}
      handle-section-events
    {% endif %}
  >
    <button
      is="close-button"
      aria-label="{{ 'general.accessibility.close' | t | escape }}"
      {%- if section.settings.opening_from == 'bottom' -%}
        class="sm-max:hidden"
      {%- endif -%}
    >
      {%- render 'icon' with 'close', width: 19, height: 19 -%}
    </button>

    {%- render 'navigation-panel',
      is_mega_menu: false,
      main_menu: main_menu,
      secondary_menu: secondary_menu,
      mobile_opening: section.settings.opening_from,
      layout: section.settings.layout,
      show_social_media: section.settings.show_social_media,
      show_country_selector: section.settings.show_country_selector,
      show_country_name: section.settings.show_country_name,
      show_country_flag: section.settings.show_country_flag,
      show_locale_selector: section.settings.show_locale_selector
    -%}
  </navigation-drawer>
{%- endif -%}

<script>
  document.documentElement.style.setProperty('--header-height', Math.round(document.getElementById('shopify-section-{{ section.id }}').clientHeight) + 'px');
</script>

{% schema %}
{
  "name": "Header (FA)",
  "class": "shopify-section--header",
  "tag": "header",
  "settings": [
    {
      "type": "checkbox",
      "id": "enable_sticky",
      "label": "Enable sticky header",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "hide_on_scroll",
      "label": "Hide on scroll",
      "default": false
    },
    {
      "type": "checkbox",
      "id": "hide_search",
      "label": "Hide search in header",
      "default": false
    },
    {
      "type": "header",
      "content": "Logo"
    },
    {
      "type": "image_picker",
      "id": "logo",
      "label": "Image",
      "info": ".svg recommended"
    },
    {
      "type": "range",
      "id": "logo_max_width",
      "min": 150,
      "max": 500,
      "step": 5,
      "unit": "px",
      "label": "Image width",
      "default": 200
    },
    {
      "type": "range",
      "id": "logo_mobile_max_width",
      "min": 50,
      "max": 300,
      "step": 5,
      "unit": "px",
      "label": "Mobile image width",
      "default": 100
    },
    {
      "type": "header",
      "content": "Navigation"
    },
    {
      "type": "link_list",
      "id": "menu",
      "label": "Menu",
      "default": "main-menu"
    },
    {
      "type": "link_list",
      "id": "sidebar_menu",
      "label": "Drawer menu"
    },
    {
      "type": "link_list",
      "id": "secondary_menu",
      "label": "Secondary menu",
      "info": "This menu won't show dropdown items. For best results, limit the number of links to 1 or 2."
    },
    {
      "type": "select",
      "id": "menu_open_trigger",
      "label": "Open dropdown items on...",
      "info": "Click mode is forced on touch devices.",
      "options": [
        {
          "value": "hover",
          "label": "Hover"
        },
        {
          "value": "click",
          "label": "Click"
        }
      ],
      "default": "click"
    },
    {
      "type": "header",
      "content": "Mobile navigation"
    },
    {
      "type": "select",
      "id": "opening_from",
      "label": "Opening from",
      "options": [
        {
          "value": "bottom",
          "label": "Bottom"
        },
        {
          "value": "left",
          "label": "Left"
        }
      ],
      "default": "bottom"
    },
    {
      "type": "header",
      "content": "Desktop"
    },
    {
      "type": "select",
      "id": "layout",
      "label": "Layout",
      "info": "When centering navigation, you should limit your links to 5.",
      "options": [
        {
          "value": "logo_left_navigation_inline",
          "label": "Logo left, navigation inline"
        },
        {
          "value": "logo_left_navigation_center",
          "label": "Logo left, navigation center"
        },
        {
          "value": "logo_left_navigation_right",
          "label": "Logo left, navigation right"
        },
        {
          "value": "logo_center_navigation_inline",
          "label": "Logo center, navigation inline"
        },
        {
          "value": "drawer",
          "label": "Drawer"
        }
      ],
      "default": "logo_left_navigation_inline"
    },
    {
      "type": "header",
      "content": "Social media",
      "info": "This will only show in the drawer navigation."
    },
    {
      "type": "checkbox",
      "id": "show_social_media",
      "label": "Show social media",
      "default": true
    },
    {
      "type": "header",
      "content": "Language selector",
      "info": "To add a language, go to your [language settings.](/admin/settings/languages)"
    },
    {
      "type": "checkbox",
      "id": "show_locale_selector",
      "label": "Show language selector",
      "default": true
    },
    {
      "type": "header",
      "content": "Country/region selector",
      "info": "To add a country/region, go to your [markets settings.](/admin/settings/markets). For best user experience, we recommend to keep this setting off and to use the free [Shopify Geolocation app](https://apps.shopify.com/geolocation)."
    },
    {
      "type": "checkbox",
      "id": "show_country_selector",
      "label": "Show country/region selector",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_country_flag",
      "label": "Show country flag",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_country_name",
      "label": "Show country name",
      "default": false
    },
    {
      "type": "header",
      "content": "Transparent header",
      "info": "Add a section on first position which allows transparent header such as slideshow or image with text overlay."
    },
    {
      "type": "color",
      "id": "transparent_header_text_color",
      "label": "Text color",
      "default": "#ffffff"
    },
    {
      "type": "image_picker",
      "id": "transparent_logo",
      "label": "Logo image",
      "info": "Use the same dimensions as main logo."
    },
    {
      "type": "header",
      "content": "Appearance"
    },
    {
      "type": "checkbox",
      "id": "reduce_padding",
      "label": "Reduce padding",
      "default": false
    },
    {
      "type": "range",
      "id": "background_opacity",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "%",
      "label": "Background opacity",
      "default": 1
    },
    {
      "type": "range",
      "id": "background_blur_radius",
      "min": 0,
      "max": 20,
      "step": 2,
      "unit": "px",
      "label": "Background blur radius",
      "default": 4
    }
  ],
  "blocks": [
    {
      "type": "mega_menu",
      "name": "Mega menu",
      "settings": [
        {
          "type": "text",
          "id": "menu_item",
          "label": "Menu item",
          "info": "Enter menu item to apply a mega menu dropdown. [Learn more](https://support.maestrooo.com/article/180-navigation-enabling-and-configuring-mega-navigation)."
        },
        {
          "type": "select",
          "id": "layout",
          "label": "Layout",
          "options": [
            {
              "value": "horizontal",
              "label": "Horizontal"
            },
            {
              "value": "horizontal_center",
              "label": "Horizontal (centered)"
            },
            {
              "value": "drawer",
              "label": "Drawer"
            }
          ],
          "default": "horizontal"
        },
        {
          "type": "select",
          "id": "submenu_style",
          "label": "Submenu",
          "options": [
            {
              "value": "bold_text",
              "label": "Bold - text only"
            },
            {
              "value": "bold_heading",
              "label": "Bold - headings only"
            }
          ],
          "default": "bold_heading"
        },
        {
          "type": "header",
          "content": "Image 1"
        },
        {
          "type": "image_picker",
          "id": "image_1",
          "label": "Image",
          "info": "1200 x 1200px .jpg recommended"
        },
        {
          "type": "text",
          "id": "image_heading_1",
          "label": "Heading"
        },
        {
          "type": "url",
          "id": "image_link_1",
          "label": "Link"
        },
        {
          "type": "color",
          "id": "image_text_color_1",
          "label": "Heading",
          "default": "#ffffff"
        },
        {
          "type": "header",
          "content": "Image 2"
        },
        {
          "type": "image_picker",
          "id": "image_2",
          "label": "Image",
          "info": "1200 x 1200px .jpg recommended"
        },
        {
          "type": "text",
          "id": "image_heading_2",
          "label": "Heading"
        },
        {
          "type": "url",
          "id": "image_link_2",
          "label": "Link"
        },
        {
          "type": "color",
          "id": "image_text_color_2",
          "label": "Heading",
          "default": "#ffffff"
        },
        {
          "type": "header",
          "content": "Image 3"
        },
        {
          "type": "image_picker",
          "id": "image_3",
          "label": "Image",
          "info": "1200 x 1200px .jpg recommended"
        },
        {
          "type": "text",
          "id": "image_heading_3",
          "label": "Heading"
        },
        {
          "type": "url",
          "id": "image_link_3",
          "label": "Link"
        },
        {
          "type": "color",
          "id": "image_text_color_3",
          "label": "Heading",
          "default": "#ffffff"
        },
        {
          "type": "header",
          "content": "Featured product"
        },
        {
          "type": "product",
          "id": "product",
          "label": "Product"
        },
        {
          "type": "color",
          "id": "product_card_background",
          "label": "Card background"
        },
        {
          "type": "color",
          "id": "product_card_text_color",
          "label": "Card text"
        },
        {
          "type": "header",
          "content": "Appearance"
        },
        {
          "type": "select",
          "id": "promo_content_layout",
          "label": "Promotional content layout",
          "info": "To improve readability, layout can be changed automatically depending on the screen size, menu column count and promotional content. [Learn more](https://support.maestrooo.com/article/296-navigation-understanding-impact-mega-menu-strategy)",
          "options": [
            {
              "value": "grid",
              "label": "Grid"
            },
            {
              "value": "collage",
              "label": "Collage"
            },
            {
              "value": "carousel",
              "label": "Carousel"
            }
          ],
          "default": "grid"
        },
        {
          "type": "checkbox",
          "id": "stretch_promo",
          "label": "Stretch to fill",
          "default": false
        },
        {
          "type": "select",
          "id": "drawer_link_image",
          "label": "Drawer link image",
          "options": [
            {
              "value": "hide",
              "label": "Hide"
            },
            {
              "value": "show",
              "label": "Show product image"
            }
          ],
          "default": "hide"
        }
      ]
    }
  ]
}
{% endschema %}
<script>
  document.addEventListener("DOMContentLoaded", function () {
      var selectedOption = document.getElementById("selectedOption");
      var dropdownList = document.getElementById("dropdownList");
      var dropdownListElements = dropdownList.children;

      selectedOption.addEventListener("click", function (e) {
          e.stopPropagation(); // Prevents the click event from bubbling up to the document body
          selectedOption.classList.toggle("selected-option-open");
      });

      Array.from(dropdownListElements).forEach((el) => {
          el.addEventListener("click", function (e) {
              e.stopPropagation(); // Prevents the click event from bubbling up to the document body
              var selectedValue = el.getAttribute("data-value");
              selectedOption.firstElementChild.innerHTML = el.innerHTML;
              dropdownList.style.display = "none";
              redirectToDomain(selectedValue);
          });
      });

      // Add click event listener to the document body to hide the dropdown
      document.body.addEventListener("click", function () {
          selectedOption.classList.remove("selected-option-open");
      });

      // Function to redirect user to the corresponding domain
      function redirectToDomain(countryCode) {
          console.log(countryCode);
          window.location.href = countryCode;
      }
  });
</script>
